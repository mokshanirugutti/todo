{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const NotePage=()=>{const{id}=useParams();const[note,setNote]=useState(null);const history=useNavigate();useEffect(()=>{getNote();},[]);const getNote=async()=>{if(id==='new')return;try{const response=await fetch(\"/api/notes/\".concat(id));if(response.ok){const data=await response.json();setNote(data);}else{console.error('Failed to fetch note data');}}catch(error){console.error('Error while fetching note data:',error);}};let updateNote=async()=>{fetch(\"/api/notes/\".concat(id,\"/update/\"),{method:'PUT',headers:{'content-Type':'application/json'},body:JSON.stringify(note)});};let createNote=async()=>{fetch(\"/api/notes/create/\",{method:'POST',headers:{'content-Type':'application/json'},body:JSON.stringify(note)});};let deleteNote=async()=>{fetch(\"/api/notes/\".concat(id,\"/delete/\"),{method:'DELETE','headers ':{'content-Type':'application/json'}});history('/');};let handleSubmit=()=>{if(id!=='new'&&note.body===''){deleteNote();}else if(id!=='new'){updateNote();}else if(id==='new'&&note!==null){createNote();}history('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>{setNote({...note,'body':e.target.value});},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","jsx","_jsx","jsxs","_jsxs","NotePage","id","note","setNote","history","getNote","response","fetch","concat","ok","data","json","console","error","updateNote","method","headers","body","JSON","stringify","createNote","deleteNote","handleSubmit","className","children","onClick","onChange","e","target","value"],"sources":["E:/Django/reacttttt/backend/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {  useParams,useNavigate } from 'react-router-dom';\r\nimport {ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\r\n\r\nconst NotePage = () => {\r\n    const { id } = useParams();\r\n    const [note, setNote] = useState(null);\r\n    const history = useNavigate();\r\n\r\n    useEffect(() => {\r\n        getNote();\r\n      },[]);  \r\n      \r\n      const getNote = async () => {\r\n        if(id === 'new') return \r\n        try {\r\n          const response = await fetch(`/api/notes/${id}`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            setNote(data);\r\n          } else {\r\n            console.error('Failed to fetch note data');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error while fetching note data:', error);\r\n        }\r\n      };\r\n\r\n      let updateNote = async () => {\r\n         fetch(`/api/notes/${id}/update/`, {\r\n            method : 'PUT',\r\n            headers : {\r\n                'content-Type' : 'application/json' \r\n            },\r\n            body:JSON.stringify(note)\r\n        })\r\n      }\r\n\r\n      let createNote = async () => {\r\n         fetch(`/api/notes/create/`, {\r\n            method : 'POST',\r\n            headers : {\r\n                'content-Type' : 'application/json' \r\n            },\r\n            body:JSON.stringify(note)\r\n        })\r\n      }\r\n\r\n      let deleteNote = async () => {\r\n        fetch(`/api/notes/${id}/delete/` , {\r\n          method : 'DELETE',\r\n          'headers ' : {\r\n            'content-Type' : 'application/json'\r\n          }\r\n        })\r\n        history('/');\r\n      }\r\n\r\n      let handleSubmit = () => {\r\n        if(id !=='new' && note.body === ''){\r\n          deleteNote()\r\n        }else if(id !== 'new'){\r\n          updateNote()\r\n        }else if(id === 'new' && note !== null) {\r\n          createNote()\r\n        }\r\n       history('/');\r\n      }\r\n\r\n  return (\r\n    <div className='note'>\r\n        <div className='note-header'>\r\n            <h3>\r\n              <ArrowLeft onClick={handleSubmit}/>\r\n            </h3>\r\n            {id !== 'new' ? (<button onClick={deleteNote}>delete</button>):\r\n            ( <button onClick={handleSubmit} >Done</button> )\r\n            }\r\n            \r\n        </div>\r\n        <textarea onChange={(e) => {setNote({...note,'body':e.target.value})}} value={note?.body}></textarea>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}